dependencies:
  brew:
    - docker-compose
  cask:
    - font-anonymice-powerline
  apt:
    - curl
  apk:
    - curl
  docker:
    - pebble
  gem:
    - bundler
    - rerun
    - ejson
  dir:
    - runtime_data
  custom:
    - bundle install --quiet
    - "echo this is stdout"
    - "echo 1>&2 this is stderr && false"
actions:
  environment:
    command: echo $environment
  start:
    command: echo update me
  stop:
    command: echo update me too
  test:
    command: bundle exec rspec
    alias: t
  test-watch:
    command: rerun -x ops test
    alias: tw
  tag:
    command: "bin/tag"
  build:
    command: gem build ops_team.gemspec
    alias: b
  install:
    command: gem i `ls -t ops_team-*.gem | head -n 1`
    alias: i
  build-and-install:
    command: ops b && ops i
    alias: bi
  push:
    command: gem push `ls -t ops_team-*.gem | head -n 1`
  lint:
    command: bundle exec rubocop --safe-auto-correct
    alias: l
  secrets:
    command: bin/print_secrets
    load_secrets: true
options:
  gem:
    use_sudo: false
    user_install: false
  environment:
    EJSON_KEYDIR: "./spec/ejson_keys"
